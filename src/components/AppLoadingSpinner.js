import React from 'react';
import createReactClass from 'create-react-class';
import PropTypes from 'prop-types';
import Reflux from 'reflux';
import PureRenderIgnoreFunctionsMixin from 'react-pure-render-ignore-functions';
import StoreMixin from 'reflux-immutable/StoreMixin';

import PredictionsStore from '../stores/PredictionsStore';

import MDSpinner from "react-md-spinner";

export default createReactClass({

  mixins: [
    PureRenderIgnoreFunctionsMixin,
    StoreMixin,
    Reflux.listenTo(PredictionsStore, 'onStoreChange')
  ],

  contextTypes: {
    muiTheme: PropTypes.object.isRequired
  },

  getStoreState() {
    return {
      shouldShowLoadingSpinner: PredictionsStore.get('isLoading') || !!PredictionsStore.get('error')
    };
  },

  _logoSvg: `<svg width="28" height="28" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M88.41 68c6.14-5.83 15.07-7.96 23.24-5.84 2.63 1.23 5.15 2.7 7.55 4.32 5.36 4.49 8.73 11.45 8.39 18.49.02 5.86-2.71 11.51-6.84 15.59-1.66 1.54-3.4 3-5.09 4.51-2.19.44-4.28 1.27-6.38 2.02-2.13.17-4.26.18-6.39.07-7.69-.72-15.04-5.3-18.46-12.32-2.94-5.42-3.28-11.9-1.58-17.77 1.5-3.22 3.19-6.4 5.56-9.07z"/><path fill="#5e5e5e" d="M111.65 62.16c1.43-.13 2.87-.22 4.32-.26 95.35-.01 190.71.01 286.07 0 1.47.04 2.93.17 4.4.37a89.48 89.48 0 0 0-8.08 4.32c-4.43-.62-8.91-.46-13.37-.43H136.95c-5.92.06-11.85-.26-17.75.32-2.4-1.62-4.92-3.09-7.55-4.32z"/><path d="M406.44 62.27c3.23-.23 6.48-.07 9.7.26 4.26.64 7.98 3.05 11.41 5.53 3.24 3.34 5.44 7.52 6.88 11.92.58 5.21.53 10.77-2.11 15.47-3.71 7.32-11.61 12.57-19.92 12.42-2.21.03-4.42-.03-6.62-.06-1.9-1.34-4.05-2.31-6.33-2.77-1.4-1.47-2.81-2.93-4.18-4.42-9.45-9.31-7.68-26.47 3.09-34.03a89.48 89.48 0 0 1 8.08-4.32z"/><path fill="#f5d415" d="M119.2 66.48c5.9-.58 11.83-.26 17.75-.32h248.04c4.46-.03 8.94-.19 13.37.43-10.77 7.56-12.54 24.72-3.09 34.03-4.75.31-9.52.23-14.28.22H126.04c-1.77-.04-3.53-.15-5.29-.28 4.13-4.08 6.86-9.73 6.84-15.59.34-7.04-3.03-14-8.39-18.49z"/><path fill="#5e5e5e" d="M82.68 70.38c1.3-1.81 3.55-2.61 5.73-2.38-2.37 2.67-4.06 5.85-5.56 9.07-1.47 2.1-3.23 3.97-4.99 5.83-20.74 21.86-41.16 44.03-62.05 65.74-2.4 1.22-4.78 2.49-6.97 4.06.13-1.09.24-2.19.35-3.29 2.4-4.47 6.87-7.23 9.98-11.15 4.25-5.72 10.19-9.92 14.45-15.64 3.71-4.26 8.21-7.77 11.66-12.25 3.73-4.65 8.63-8.21 12.21-12.99 3.94-5.03 9.25-8.81 13.05-13.96 3.7-4.67 8.68-8.17 12.14-13.04zm344.87-2.32c1.44-.13 2.94.32 3.85 1.51 20.38 22.94 40.64 46.01 61.11 68.86 4.22 5.58 9.65 10.17 13.39 16.11-.03.7-.07 2.12-.09 2.83-2.3-2.3-5.07-4.02-7.87-5.62-16.92-18.31-33.12-37.32-49.78-55.89-4.53-5.34-9.56-10.26-13.73-15.88-1.44-4.4-3.64-8.58-6.88-11.92z"/><path fill="#fff" d="M89.1 81.41c1.29-9.37 12.08-15.55 20.87-12.16 7.79 2.35 12.02 11.14 10.39 18.88-1.72 5.77-6.4 10.74-12.47 11.79-10.49 2.7-21.33-7.99-18.79-18.51zm314.51-9.97c6.96-4.3 17.1-2.29 21.54 4.72 4.72 6.81 2.99 17.3-4.01 21.92-4.04 3.22-9.49 3.07-14.33 2.3-5.85-2.33-10.73-7.84-10.65-14.38-.56-5.79 2.49-11.58 7.45-14.56z"/><path fill="#00b050" d="M77.86 82.9c1.76-1.86 3.52-3.73 4.99-5.83-1.7 5.87-1.36 12.35 1.58 17.77 3.42 7.02 10.77 11.6 18.46 12.32-18.89 20.16-37.71 40.39-56.85 60.3-1.18-7.97-6.6-15.24-14.16-18.19-5.06-2.28-10.82-2.1-16.07-.63 20.89-21.71 41.31-43.88 62.05-65.74z"/><path fill="#da8707" d="M434.43 79.98c4.17 5.62 9.2 10.54 13.73 15.88 16.66 18.57 32.86 37.58 49.78 55.89-6.47-2.73-14.11-2.49-20.25 1.01-6.12 3.17-10.29 9.42-11.53 16.13-17.82-20.43-36.08-40.48-53.76-61.02 8.31.15 16.21-5.1 19.92-12.42 2.64-4.7 2.69-10.26 2.11-15.47z"/><path fill="#222" d="M115.66 105.07c1.69-1.51 3.43-2.97 5.09-4.51 1.76.13 3.52.24 5.29.28h254.95c4.76.01 9.53.09 14.28-.22 1.37 1.49 2.78 2.95 4.18 4.42-7.78.16-15.55.08-23.33.11.02 53.47-.05 106.95.04 160.42 17.82-19.32 35.21-39.02 53.01-58.36 10.93-11.95 21.53-24.21 32.74-35.9-18.77-21.11-37.63-42.16-56.13-63.5 2.2.03 4.41.09 6.62.06 17.68 20.54 35.94 40.59 53.76 61.02-.18 1.79-.29 3.59-.31 5.39-14.85 15.66-29.03 31.95-43.63 47.83-54.24 59.84-108.46 119.69-162.72 179.51-1.78.02-3.55.17-5.31.38-67.16-74.51-134.78-148.63-202.07-223.03-1.96-2.19-3.99-4.3-6.08-6.36.07-1.72.07-3.43 0-5.15 19.14-19.91 37.96-40.14 56.85-60.3 2.13.11 4.26.1 6.39-.07-2.44 3.9-5.91 6.95-9.16 10.14-3.19 3.09-5.78 6.73-8.96 9.82-6.39 5.99-11.74 12.96-18.17 18.91-5.01 6.29-11.27 11.42-16.31 17.68-1.95 2.26-4.1 4.34-6.24 6.43 3.92 3.59 7.13 7.85 10.8 11.69 25.52 28.24 51.18 56.37 76.73 84.59.07-53.75.01-107.5.03-161.24-7.45.07-14.89.05-22.34-.04z"/><path fill="#3f51b5" d="M109.28 107.09c2.1-.75 4.19-1.58 6.38-2.02 7.45.09 14.89.11 22.34.04-.02 53.74.04 107.49-.03 161.24-25.55-28.22-51.21-56.35-76.73-84.59-3.67-3.84-6.88-8.1-10.8-11.69 2.14-2.09 4.29-4.17 6.24-6.43 5.04-6.26 11.3-11.39 16.31-17.68 6.43-5.95 11.78-12.92 18.17-18.91 3.18-3.09 5.77-6.73 8.96-9.82 3.25-3.19 6.72-6.24 9.16-10.14zm109.56-2.05c25.78.18 51.57.13 77.36.03-2.28 6.74-6.18 12.9-7.38 19.99-2.24 5.34-4.13 10.83-6.47 16.14-1.55 6.59-4.33 12.79-7.03 18.96-1.54 8.86-6.95 16.44-8.65 25.26-2.98 8.31-7.15 16.21-8.99 24.9-2.77-8.06-5.9-15.96-8.9-23.94-2.11-7.17-4.98-14.11-7.98-20.95-.64-6.42-4.4-11.89-6.24-17.99-1.89-7.8-5.61-15-8.29-22.54-1.45-6.98-4.75-13.32-7.43-19.86zm157.28.11c7.78-.03 15.55.05 23.33-.11 2.28.46 4.43 1.43 6.33 2.77 18.5 21.34 37.36 42.39 56.13 63.5-11.21 11.69-21.81 23.95-32.74 35.9-17.8 19.34-35.19 39.04-53.01 58.36-.09-53.47-.02-106.95-.04-160.42z"/><path fill="#fff" d="M144.93 105.9c22.49.08 44.98-.11 67.46.09 1.66 5.93 4.13 11.62 5.89 17.54 3.89 8.82 6.33 18.22 10.27 27.02 1.84 5.7 3.87 11.35 5.79 17.03 3.17 6.3 4.63 13.3 7.46 19.76 3.31 7.55 5 15.73 8.61 23.15 2.26 6.47 4.38 12.99 6.96 19.34.47-1.06.94-2.1 1.43-3.14 2.14-5.65 3.86-11.45 6.14-17.04 3.24-7.57 5.27-15.62 8.73-23.09 5.34-15.44 11.04-30.76 16.89-46.01 1.8-5.73 3.9-11.36 6.15-16.93 1.71-4.34 3.09-8.79 4.62-13.2 1.05-1.56 1.05-4.84 3.61-4.49 21.49-.06 42.97 0 64.46-.03-.03 55.05-.03 110.09 0 165.13.51 2.94-2.67 4.27-4.02 6.42-2.42 3.82-6.54 6.19-8.8 10.11-4.85 4.54-8.88 9.81-13.55 14.5-3.03 4.24-7.36 7.31-10.29 11.64-4.49 4.14-7.78 9.35-12.48 13.29.09-51.86-.12-103.72.11-155.58l-.53-.04c-1.07 4.13-3.05 7.96-4.32 12.03-1.6 4.41-3 8.89-4.84 13.2-2.19 5.58-4.12 11.26-6.01 16.96-2.75 5.94-4.64 12.24-6.87 18.39-3.48 8.39-6.25 17.04-9.3 25.6-2.55 5.08-3.68 10.72-6.02 15.89-.56 2.05-1.27 4.06-2.22 5.97-2.04 5.56-4.04 11.14-5.98 16.74-11.13-.21-22.29.27-33.4-.24-7.26-20.26-14.89-40.38-22.23-60.62-3.06-7.14-4.82-14.8-8.27-21.77-1.63-5.77-4.19-11.22-5.66-17.04-3.42-6.49-4.77-13.86-7.89-20.49-.76-1.64-1.04-3.44-1.47-5.18-.23 1.71-.48 3.41-.51 5.14v148.06c.01 1.77.1 3.54.18 5.31-2.82-3.96-6.83-6.85-9.67-10.8-2.22-2.96-5.6-4.93-7.36-8.23-2.39-2.58-5.15-4.84-7.17-7.74-8.57-9.56-17.32-18.93-25.82-28.55-.17-56.03-.02-112.07-.08-168.1z"/><path d="M15.81 148.64c5.25-1.47 11.01-1.65 16.07.63 7.56 2.95 12.98 10.22 14.16 18.19.07 1.72.07 3.43 0 5.15-.66 8.35-6.37 16-14.15 19.07-4.15 1.87-8.8 1.99-13.26 1.56-3.09-1.17-6.16-2.48-8.94-4.3-11.7-8.08-12.11-27.61-.85-36.24 2.19-1.57 4.57-2.84 6.97-4.06zm461.88 4.12c6.14-3.5 13.78-3.74 20.25-1.01 2.8 1.6 5.57 3.32 7.87 5.62 5.71 6.35 6.53 15.59 4.33 23.55-1.41 3.68-3.91 6.82-6.52 9.73-3.03 1.9-6.32 3.36-9.64 4.68-5.2.62-10.75.58-15.45-2.03-7.24-3.49-12.11-11.04-12.68-19.02.02-1.8.13-3.6.31-5.39 1.24-6.71 5.41-12.96 11.53-16.13z"/><path fill="#fff" d="M11.51 159.63c4.29-4.66 11.54-6.46 17.45-4.04 3.67 1.18 6.28 4.21 8.48 7.22 2.8 5.92 2.32 13.44-2.33 18.3-3.86 4.54-10.32 6.3-16.03 4.87-3.38-1.25-6.74-3.05-8.76-6.14-4.33-5.95-3.82-14.82 1.19-20.21zm473.39-2.25c8.28-2.5 17.23 3.39 19.43 11.51.81 5.14-.05 10.85-3.84 14.68-5.48 6.35-16.19 6.87-22.34 1.2-4-3.36-5.63-8.76-5.44-13.85 1.16-6.33 5.63-12.23 12.19-13.54z"/><path fill="#0795d3" d="M46.04 172.61c2.09 2.06 4.12 4.17 6.08 6.36 67.29 74.4 134.91 148.52 202.07 223.03-8.3.8-15.75 6.55-18.94 14.21-2.34 4.67-2.04 10.03-1.52 15.07-67.76-74.89-135.67-149.66-203.52-224.47-3.83-4.55-8.41-8.49-11.58-13.57 4.46.43 9.11.31 13.26-1.56 7.78-3.07 13.49-10.72 14.15-19.07z"/><path fill="#be1337" d="M422.22 222.11c14.6-15.88 28.78-32.17 43.63-47.83.57 7.98 5.44 15.53 12.68 19.02 4.7 2.61 10.25 2.65 15.45 2.03-8.19 8.04-15.5 16.94-23.34 25.32-53.07 58.58-106.17 117.13-159.24 175.71-10.37 11.07-20.07 22.8-30.8 33.53.42-5.36.15-11.02-2.71-15.73-3.6-6.92-10.82-11.32-18.39-12.54 54.26-59.82 108.48-119.67 162.72-179.51z"/><path fill="#5e5e5e" d="M9.69 188.94c2.78 1.82 5.85 3.13 8.94 4.3 3.17 5.08 7.75 9.02 11.58 13.57 67.85 74.81 135.76 149.58 203.52 224.47 1.41 3.38 2.97 6.74 5.28 9.62-.66 0-1.98-.01-2.64-.01-5.78-5-10.27-11.31-15.66-16.72-2.89-4.06-6.97-7.05-9.98-11-16.54-18.11-32.8-36.46-49.48-54.45-11.72-13.55-24.26-26.39-35.97-39.97-4.41-4.08-7.76-9.11-12.23-13.14-1.29-2.2-3.21-3.89-5.02-5.65-28.83-31.83-57.61-63.69-86.55-95.42-3.76-5.32-10.15-8.92-11.79-15.6zm484.29 6.39c3.32-1.32 6.61-2.78 9.64-4.68-2.45 4.28-6.13 7.83-9.57 11.38-26.95 30.02-54.2 59.75-81.18 89.76-3.77 3.29-6.31 7.69-10.13 10.93-8.07 9.53-16.88 18.41-25.05 27.85-32.88 36.16-65.65 72.43-98.5 108.62-1.89 2.44-4 5.36-7.5 5.04 4.54-3.57 7.47-8.8 8.91-14.34 10.73-10.73 20.43-22.46 30.8-33.53 53.07-58.58 106.17-117.13 159.24-175.71 7.84-8.38 15.15-17.28 23.34-25.32z"/><path fill="#3f51b5" d="M201.99 211.01c1.07 1.69 1.83 3.54 2.39 5.46 2.07 7.73 5.42 15.02 8.32 22.45 1.49 8.77 7.04 16.13 8.7 24.84 2.77 7.46 6.19 14.7 8.33 22.38 1.23 4.03 3.01 7.85 4.56 11.76.88 2.37 2.95 4.74 5.69 4.55 11.68.03 23.37.02 35.06.01 3.13.24 5.09-2.66 6.13-5.21 1.34-3.37 2.81-6.68 3.97-10.11 2.01-8.37 6.28-15.97 8.83-24.17 1.47-6.67 5.04-12.59 7.13-19.06 1.86-7.73 5.46-14.89 8.22-22.31.89-3.57 1.54-7.35 3.86-10.34.43 40.25.02 80.52.2 120.77.35 3.84-3.2 6.28-5.44 8.88-17.01 18.73-33.93 37.55-51.01 56.21-1.28-.24-1.74-1.73-2.61-2.53-17.67-19.04-34.68-38.66-52.54-57.53.18-42.01-.24-84.04.21-126.05z"/><path d="M254.19 402c1.76-.21 3.53-.36 5.31-.38 7.57 1.22 14.79 5.62 18.39 12.54 2.86 4.71 3.13 10.37 2.71 15.73-1.44 5.54-4.37 10.77-8.91 14.34-2.05 1.57-4.41 2.68-6.72 3.8-5.2 1.59-10.72 1.64-15.9-.07-3.75-1.69-7.47-3.8-10.06-7.06-2.31-2.88-3.87-6.24-5.28-9.62-.52-5.04-.82-10.4 1.52-15.07 3.19-7.66 10.64-13.41 18.94-14.21z"/><path fill="#fff" d="M246.08 413.1c4.28-4.07 10.53-4.45 16.07-3.49 5.48 1.97 9.69 6.52 11.17 12.16.24 2.47.24 4.97 0 7.46-1.48 5.61-5.66 10.16-11.11 12.15-5.09.8-10.8.83-15.01-2.59-8.31-5.77-8.84-19.2-1.12-25.69z"/></svg>`,

  render() {
    let loadingSpinner;
    if (this.state.shouldShowLoadingSpinner) {
      loadingSpinner = (
        <MDSpinner
          size={42}
          singleColor={this.context.muiTheme.palette.accent1Color}
          style={{position: 'absolute', right: 8, top: 8}}
        />
      );
    }

    return (
      <div>
        <div
          style={{
            display: "inline-block",
            position: "absolute",
            right: 15,
            top: 16
          }}
          dangerouslySetInnerHTML={{__html: this._logoSvg}}
        />
        {loadingSpinner}
      </div>
    );
  }
});
